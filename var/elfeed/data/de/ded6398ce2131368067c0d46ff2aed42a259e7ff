<p>The Rust team is happy to announce a new version of Rust, 1.89.0. Rust is a programming language empowering everyone to build reliable and efficient software.</p>
<p>If you have a previous version of Rust installed via <code>rustup</code>, you can get 1.89.0 with:</p>
<pre data-lang="console" class="language-console z-code"><code class="language-console" data-lang="console"><span class="z-text z-plain">$ rustup update stable
</span></code></pre>
<p>If you don't have it already, you can <a href="https://www.rust-lang.org/install.html">get <code>rustup</code></a> from the appropriate page on our website, and check out the <a href="https://doc.rust-lang.org/stable/releases.html#version-1890-2025-08-07">detailed release notes for 1.89.0</a>.</p>
<p>If you'd like to help us out by testing future releases, you might consider updating locally to use the beta channel (<code>rustup default beta</code>) or the nightly channel (<code>rustup default nightly</code>). Please <a href="https://github.com/rust-lang/rust/issues/new/choose">report</a> any bugs you might come across!</p>
<h2 id="what-s-in-1-89-0-stable"><a class="anchor" href="#what-s-in-1-89-0-stable" aria-hidden="true"></a>
What's in 1.89.0 stable</h2>
<h3 id="explicitly-inferred-arguments-to-const-generics"><a class="anchor" href="#explicitly-inferred-arguments-to-const-generics" aria-hidden="true"></a>
Explicitly inferred arguments to const generics</h3>
<p>Rust now supports <code>_</code> as an argument to const generic parameters, inferring the value from surrounding context:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">all_false</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-rust">const</span> LEN<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">usize</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> </span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-constant z-other z-rust">LEN</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Similar to the rules for when <code>_</code> is permitted as a type, <code>_</code> is not permitted as an argument to const generics when in a signature:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This is not allowed
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-rust">const</span> <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">all_false</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-rust">const</span> LEN<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">usize</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> </span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">  <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-constant z-other z-rust">LEN</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Neither is this
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">ALL_FALSE</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-storage z-type z-rust">bool</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">all_false<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>10<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="mismatched-lifetime-syntaxes-lint"><a class="anchor" href="#mismatched-lifetime-syntaxes-lint" aria-hidden="true"></a>
Mismatched lifetime syntaxes lint</h3>
<p><a href="https://doc.rust-lang.org/1.89/book/ch10-03-lifetime-syntax.html#lifetime-elision">Lifetime elision</a> in function signatures is an ergonomic aspect of the Rust language, but it can also be a stumbling point for newcomers and experts alike. This is especially true when lifetimes are inferred in types where it isn't syntactically obvious that a lifetime is even present:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> The returned type `std::slice::Iter` has a lifetime, 
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> but there&#39;s no visual indication of that.
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Lifetime elision infers the lifetime of the return 
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> type to be the same as that of `scores`.
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">items</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">scores</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span>[<span class="z-storage z-type z-rust">u8</span>]</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">slice<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust">Iter<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">   scores<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Code like this will now produce a warning by default:</p>
<pre data-lang="text" class="language-text z-code"><code class="language-text" data-lang="text"><span class="z-text z-plain">warning: hiding a lifetime that&#39;s elided elsewhere is confusing
</span><span class="z-text z-plain"> --&gt; src/lib.rs:1:18
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">1 | fn items(scores: &amp;[u8]) -&gt; std::slice::Iter&lt;u8&gt; {
</span><span class="z-text z-plain">  |                  ^^^^^     -------------------- the same lifetime is hidden here
</span><span class="z-text z-plain">  |                  |
</span><span class="z-text z-plain">  |                  the lifetime is elided here
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">  = help: the same lifetime is referred to in inconsistent ways, making the signature confusing
</span><span class="z-text z-plain">  = note: `#[warn(mismatched_lifetime_syntaxes)]` on by default
</span><span class="z-text z-plain">help: use `&#39;_` for type paths
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">1 | fn items(scores: &amp;[u8]) -&gt; std::slice::Iter&lt;&#39;_, u8&gt; {
</span><span class="z-text z-plain">  |                                             +++
</span></code></pre>
<p>We <a href="https://github.com/rust-lang/rust/pull/46254">first attempted</a> to improve this situation back in 2018 as part of the <a href="https://github.com/rust-lang/rust/issues/54910"><code>rust_2018_idioms</code></a> lint group, but <a href="https://github.com/rust-lang/rust/issues/131725">strong feedback</a> about the <code>elided_lifetimes_in_paths</code> lint showed that it was too blunt of a hammer as it warns about lifetimes which don't matter to understand the function:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span>fmt<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Greeting</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-path z-rust">fmt<span class="z-punctuation z-accessor z-rust">::</span></span>Display <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">Greeting</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">fmt</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">f</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-path z-rust">fmt<span class="z-punctuation z-accessor z-rust">::</span></span>Formatter</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-path z-rust">fmt<span class="z-punctuation z-accessor z-rust">::</span></span>Result</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>                -----^^^^^^^^^ expected lifetime parameter
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Knowing that `Formatter` has a lifetime does not help the programmer
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>howdy<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">fmt</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>f</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>We then realized that the confusion we want to eliminate occurs when both</p>
<ol>
<li>lifetime elision inference rules <em>connect</em> an input lifetime to an output lifetime</li>
<li>it's not syntactically obvious that a lifetime exists</li>
</ol>
<p>There are two pieces of Rust syntax that indicate that a lifetime exists: <code>&amp;</code> and <code>'</code>, with <code>'</code> being subdivided into the inferred lifetime <code>'_</code> and named lifetimes <code>'a</code>. When a type uses a named lifetime, lifetime elision will not infer a lifetime for that type. Using these criteria, we can construct three groups:</p>
<table><thead><tr><th>Self-evident it has a lifetime</th><th>Allow lifetime elision to infer a lifetime</th><th>Examples</th></tr></thead><tbody>
<tr><td>No</td><td>Yes</td><td><code>ContainsLifetime</code></td></tr>
<tr><td>Yes</td><td>Yes</td><td><code>&amp;T</code>, <code>&amp;'_ T</code>, <code>ContainsLifetime&lt;'_&gt;</code></td></tr>
<tr><td>Yes</td><td>No</td><td><code>&amp;'a T</code>, <code>ContainsLifetime&lt;'a&gt;</code></td></tr>
</tbody></table>
<p>The <code>mismatched_lifetime_syntaxes</code> lint checks that the inputs and outputs of a function belong to the same group. For the initial motivating example above, <code>&amp;[u8]</code> falls into the second group while <code>std::slice::Iter&lt;u8&gt;</code> falls into the first group. We say that the lifetimes in the first group are <em>hidden</em>.</p>
<p>Because the input and output lifetimes belong to different groups, the lint will warn about this function, reducing confusion about when a value has a meaningful lifetime that isn't visually obvious.</p>
<p>The <code>mismatched_lifetime_syntaxes</code> lint supersedes the <code>elided_named_lifetimes</code> lint, which did something similar for named lifetimes specifically.</p>
<p>Future work on the <code>elided_lifetimes_in_paths</code> lint intends to split it into more focused sub-lints with an eye to warning about a subset of them eventually.</p>
<h3 id="more-x86-target-features"><a class="anchor" href="#more-x86-target-features" aria-hidden="true"></a>
More x86 target features</h3>
<p>The <code>target_feature</code> attribute now supports the <code>sha512</code>, <code>sm3</code>, <code>sm4</code>, <code>kl</code> and <code>widekl</code> target features on x86. Additionally a number of <code>avx512</code> intrinsics and target features are also supported on x86:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">target_feature</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">enable <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>avx512bw<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">cool_simd_code</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> .. <span class="z-punctuation z-definition z-comment z-rust">*/</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> </span><span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span></code></pre>
<h3 id="cross-compiled-doctests"><a class="anchor" href="#cross-compiled-doctests" aria-hidden="true"></a>
Cross-compiled doctests</h3>
<p>Doctests will now be tested when running <code>cargo test --doc --target other_target</code>, this may result in some amount of breakage due to would-be-failing doctests now being tested.</p>
<p>Failing tests can be disabled by annotating the doctest with <code>ignore-&lt;target&gt;</code> (<a href="https://doc.rust-lang.org/stable/rustdoc/write-documentation/documentation-tests.html#ignoring-targets">docs</a>):</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> ```ignore-x86_64
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> panic!(&quot;something&quot;)
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> ```
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_function</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="i128-and-u128-in-extern-c-functions"><a class="anchor" href="#i128-and-u128-in-extern-c-functions" aria-hidden="true"></a>
<code>i128</code> and <code>u128</code> in <code>extern "C"</code> functions</h3>
<p><code>i128</code> and <code>u128</code> no longer trigger the <code>improper_ctypes_definitions</code> lint, meaning these types may be used in <code>extern "C"</code> functions without warning. This comes with some caveats:</p>
<ul>
<li>The Rust types are ABI- and layout-compatible with (unsigned) <code>__int128</code> in C when the type is available.</li>
<li>On platforms where <code>__int128</code> is not available, <code>i128</code> and <code>u128</code> do not necessarily align with any C type.</li>
<li><code>i128</code> is <em>not</em> necessarily compatible with <code>_BitInt(128)</code> on any platform, because <code>_BitInt(128)</code> and <code>__int128</code> may not have the same ABI (as is the case on x86-64).</li>
</ul>
<p>This is the last bit of follow up to the layout changes from last year: <a href="https://blog.rust-lang.org/2024/03/30/i128-layout-update">https://blog.rust-lang.org/2024/03/30/i128-layout-update</a>.</p>
<h3 id="demoting-x86-64-apple-darwin-to-tier-2-with-host-tools"><a class="anchor" href="#demoting-x86-64-apple-darwin-to-tier-2-with-host-tools" aria-hidden="true"></a>
Demoting <code>x86_64-apple-darwin</code> to Tier 2 with host tools</h3>
<p>GitHub will soon <a href="https://github.blog/changelog/2025-07-11-upcoming-changes-to-macos-hosted-runners-macos-latest-migration-and-xcode-support-policy-updates/#macos-13-is-closing-down">discontinue</a> providing free macOS x86_64 runners for public repositories. Apple has also announced their <a href="https://en.wikipedia.org/wiki/Mac_transition_to_Apple_silicon#Timeline">plans</a> for discontinuing support for the x86_64 architecture.</p>
<p>In accordance with these changes, the Rust project is in the <a href="https://github.com/rust-lang/rfcs/pull/3841">process of demoting the <code>x86_64-apple-darwin</code> target</a> from <a href="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-1-with-host-tools">Tier 1 with host tools</a> to <a href="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-2-with-host-tools">Tier 2 with host tools</a>. This means that the target, including tools like <code>rustc</code> and <code>cargo</code>, will be guaranteed to build but is not guaranteed to pass our automated test suite.</p>
<p>We expect that the RFC for the demotion to Tier 2 with host tools will be accepted between the releases of Rust 1.89 and 1.90, which means that Rust 1.89 will be the last release of Rust where <code>x86_64-apple-darwin</code> is a Tier 1 target.</p>
<p>For users, this change will not immediately cause impact. Builds of both the standard library and the compiler will still be distributed by the Rust Project for use via <code>rustup</code> or alternative installation methods while the target remains at Tier 2. Over time, it's likely that reduced test coverage for this target will cause things to break or fall out of compatibility with no further announcements.</p>
<h3 id="standards-compliant-c-abi-on-the-wasm32-unknown-unknown-target"><a class="anchor" href="#standards-compliant-c-abi-on-the-wasm32-unknown-unknown-target" aria-hidden="true"></a>
Standards Compliant C ABI on the <code>wasm32-unknown-unknown</code> target</h3>
<p><code>extern "C"</code> functions on the <code>wasm32-unknown-unknown</code> target now have a standards compliant ABI. See this blog post for more information: <a href="https://blog.rust-lang.org/2025/04/04/c-abi-changes-for-wasm32-unknown-unknown">https://blog.rust-lang.org/2025/04/04/c-abi-changes-for-wasm32-unknown-unknown</a>.</p>
<h3 id="platform-support"><a class="anchor" href="#platform-support" aria-hidden="true"></a>
Platform Support</h3>
<ul>
<li><a href="https://github.com/rust-lang/rfcs/pull/3841"><code>x86_64-apple-darwin</code> is in the process of being demoted to Tier 2 with host tools</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/142053">Add new Tier-3 targets <code>loongarch32-unknown-none</code> and <code>loongarch32-unknown-none-softfloat</code></a></li>
</ul>
<p>Refer to Rust’s <a href="https://doc.rust-lang.org/rustc/platform-support.html">platform support page</a> for more information on Rust’s tiered platform support.</p>
<h3 id="stabilized-apis"><a class="anchor" href="#stabilized-apis" aria-hidden="true"></a>
Stabilized APIs</h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.NonZero.html"><code>NonZero&lt;char&gt;</code></a></li>
<li>Many intrinsics for x86, not enumerated here
<ul>
<li><a href="https://github.com/rust-lang/rust/issues/111137">AVX512 intrinsics</a></li>
<li><a href="https://github.com/rust-lang/rust/issues/126624"><code>SHA512</code>, <code>SM3</code> and <code>SM4</code> intrinsics</a></li>
</ul>
</li>
<li><a href="https://doc.rust-lang.org/stable/std/fs/struct.File.html#method.lock"><code>File::lock</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/fs/struct.File.html#method.lock_shared"><code>File::lock_shared</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/fs/struct.File.html#method.try_lock"><code>File::try_lock</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/fs/struct.File.html#method.try_lock_shared"><code>File::try_lock_shared</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/fs/struct.File.html#method.unlock"><code>File::unlock</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html#method.from_ref"><code>NonNull::from_ref</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html#method.from_mut"><code>NonNull::from_mut</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html#method.without_provenance"><code>NonNull::without_provenance</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html#method.with_exposed_provenance"><code>NonNull::with_exposed_provenance</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html#method.expose_provenance"><code>NonNull::expose_provenance</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/ffi/struct.OsString.html#method.leak"><code>OsString::leak</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/path/struct.PathBuf.html#method.leak"><code>PathBuf::leak</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/result/enum.Result.html#method.flatten"><code>Result::flatten</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/os/linux/net/trait.TcpStreamExt.html#tymethod.quickack"><code>std::os::linux::net::TcpStreamExt::quickack</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/os/linux/net/trait.TcpStreamExt.html#tymethod.set_quickack"><code>std::os::linux::net::TcpStreamExt::set_quickack</code></a></li>
</ul>
<p>These previously stable APIs are now stable in const contexts:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.array.html#method.as_mut_slice"><code>&lt;[T; N]&gt;::as_mut_slice</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.slice.html#impl-%5Bu8%5D/method.eq_ignore_ascii_case"><code>&lt;[u8]&gt;::eq_ignore_ascii_case</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.str.html#impl-str/method.eq_ignore_ascii_case"><code>str::eq_ignore_ascii_case</code></a></li>
</ul>
<h3 id="other-changes"><a class="anchor" href="#other-changes" aria-hidden="true"></a>
Other changes</h3>
<p>Check out everything that changed in <a href="https://github.com/rust-lang/rust/releases/tag/1.89.0">Rust</a>, <a href="https://doc.rust-lang.org/nightly/cargo/CHANGELOG.html#cargo-189-2025-08-07">Cargo</a>, and <a href="https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-189">Clippy</a>.</p>
<h2 id="contributors-to-1-89-0"><a class="anchor" href="#contributors-to-1-89-0" aria-hidden="true"></a>
Contributors to 1.89.0</h2>
<p>Many people came together to create Rust 1.89.0. We couldn't have done it without all of you. <a href="https://thanks.rust-lang.org/rust/1.89.0/">Thanks!</a></p>

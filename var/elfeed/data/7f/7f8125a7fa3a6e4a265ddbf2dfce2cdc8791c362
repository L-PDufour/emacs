<p data-bo="211">In December 2023, a minor miracle happened: <a href="https://blog.rust-lang.org/2023/12/21/async-fn-rpit-in-traits.html">async fn in traits</a> shipped.</p>

<p data-bo="354">As of Rust 1.39, we already had free-standing async functions:</p>

<figure role="region" aria-label="Code block" class="code-block" translate="no" data-lang="rust" data-bo="418"><code class="scroll-wrapper"><i class=hh4>pub</i> <i class=hh4>async</i> <i class=hh4>fn</i> <i class=hh3>read_hosts</i><i class=hh8>(</i><i class=hh8>)</i> -&gt; eyre<i class=hh9>::</i><i class=hh13>Result</i><i class=hh8>&lt;</i><i class=hh13>Vec</i><i class=hh8>&lt;</i><i class=hh14>u8</i><i class=hh8>&gt;</i><i class=hh8>&gt;</i> <i class=hh8>{</i>
    <i class=hh18>// etc.</i>
<i class=hh8>}</i>
</code></figure><p data-bo="498">â€¦and async functions in impl blocks:</p>

<figure role="region" aria-label="Code block" class="code-block" translate="no" data-lang="rust" data-bo="538"><code class="scroll-wrapper"><i class=hh4>impl</i> <i class=hh13>HostReader</i> <i class=hh8>{</i>
    <i class=hh4>pub</i> <i class=hh4>async</i> <i class=hh4>fn</i> <i class=hh3>read_hosts</i><i class=hh8>(</i><i class=hh5>&amp;</i><i class=hh16>self</i><i class=hh8>)</i> -&gt; eyre<i class=hh9>::</i><i class=hh13>Result</i><i class=hh8>&lt;</i><i class=hh13>Vec</i><i class=hh8>&lt;</i><i class=hh14>u8</i><i class=hh8>&gt;</i><i class=hh8>&gt;</i> <i class=hh8>{</i>
        <i class=hh18>// etc.</i>
    <i class=hh8>}</i>
<i class=hh8>}</i>
</code></figure><p data-bo="655">But we did not have async functions in traits:</p>









<a id="the-size-of-locals" href="#the-size-of-locals" class="anchor"></a>


















<!-- playwall -->












<a id="just-boxing-it" href="#just-boxing-it" class="anchor"></a>


















<a id="dynamic-dispatch" href="#dynamic-dispatch" class="anchor"></a>
























<a id="dyn-compatibility" href="#dyn-compatibility" class="anchor"></a>




































<a id="associated-types" href="#associated-types" class="anchor"></a>















<a id="a-refreshed-service-trait" href="#a-refreshed-service-trait" class="anchor"></a>










<a id="unnameable-types" href="#unnameable-types" class="anchor"></a>










<a id="lifetimes-a-refresher" href="#lifetimes-a-refresher" class="anchor"></a>
















<a id="hidden-captures" href="#hidden-captures" class="anchor"></a>






























<a id="relaxing-lifetime-bounds" href="#relaxing-lifetime-bounds" class="anchor"></a>












<a id="sendness" href="#sendness" class="anchor"></a>




















<a id="afterword" href="#afterword" class="anchor"></a>








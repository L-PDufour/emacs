<p data-bo="117">In the previous chapter, we’ve made a nix “dev shell” that contained the fly.io
command-line utility, “flyctl”.</p>

<p data-bo="230">That said, that’s not how I want us to define a dev shell.</p>

<p data-bo="290">Our current solution has issues. I don’t like that it has <code>import &lt;nixpkgs&gt;</code>.
Which version of <code>nixpkgs</code> is that? The one you’re on? Who knows what that is.</p>

<p data-bo="448">Also, we haven’t really seen a mechanism to use <code>.nix</code> files from elsewhere.</p>







<a id="a-flake-with-derivation" href="#a-flake-with-derivation" class="anchor"></a>




























































<a id="a-flake-with-mkderivation" href="#a-flake-with-mkderivation" class="anchor"></a>




















<a id="a-flake-with-a-dev-shell" href="#a-flake-with-a-dev-shell" class="anchor"></a>












































<a id="setting-up-direnv-and-nix-direnv" href="#setting-up-direnv-and-nix-direnv" class="anchor"></a>






























<a id="setting-up-direnv-in-vscode" href="#setting-up-direnv-in-vscode" class="anchor"></a>






<a id="accessing-our-private-registry" href="#accessing-our-private-registry" class="anchor"></a>




<a id="adding-missing-dependencies" href="#adding-missing-dependencies" class="anchor"></a>




































